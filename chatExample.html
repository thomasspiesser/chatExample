<head>
  <title>meteor-chat-example</title>
</head>

<body>
  <h1 style="text-align: center;">Welcome to my Meteor chat example</h1>
  <h3 style="text-align: center; margin-top:0px;">This is an example for an open chat. Try it!</h3>

	<div class="ui grid">
		<div class="ui four wide column"></div>
			<div class="ui eight wide column">
        {{> errorMessage}}
			  {{#unless currentUser}}
					{{> login}}
				{{else}}
			  	{{> messages}}
			  {{/unless}}
			</div>
		<div class="ui four wide column">
			{{#if currentUser}}
				{{> logout}}
		  {{/if}}
		</div>
  </div>

</body>

<template name="messages">
  <div id="messageContainer">
	{{#each messages}}
    <!-- <div class="ui divider"></div> -->
    <div class="message" style="{{ownMessage}}">
      <div class="message-head">
        <div class="message-date">{{when}}</div>
        <div class="user-name">{{username}} says:</div>
      </div>
      <div class="message-body">{{message}}</div>
    </div>
  {{/each}}
  </div>
  <form class="ui form">
    <div class="ui action left input" style="width:100%; margin-top: 15px;">
      <input type="text" id="inputField" placeholder="type your message">
      <div class="ui blue button sendNewMessage">Send</div>
    </div>
  </form>
</template>

<template name="login">
  <div class="ui segment">
    <form class="ui form">
      <div class="two fields">
        <div class="required field">
          <label>Username</label>
          <div class="ui icon input">
            <input type="text" id="username" value={{randomUsername}}>
            <i class="user icon"></i>
          </div>
        </div>
        <div class="required field">
          <label>Password</label>
          <div class="ui icon input">
            <input type="password" id="password" value={{randomPassword}}>
            <i class="lock icon"></i>
          </div>
        </div>
      </div>

      <button type="button" class="ui blue basic button" id="signUpButton">Sign in</button>
    </form>
    <div class="ui hidden clearing divider"></div>
    <div class="ui hidden clearing divider"></div>

    <div class="ui bottom attached small label">
      To save you the hassle, I created a random username and password for you. Just hit sign in and have a look around!
    </div>
  </div>
</template>

<template name="logout">
  <button type="button" class="ui red basic button" id="logoutButton">Sign out</button>
</template>

<template name="errorMessage">
	{{#if error}}
    <div class="ui error message">
      <div class="content">
        <div class="header">Error</div>
        <p>{{error}}</p>
      </div>
    </div>
  {{/if}}
</template>